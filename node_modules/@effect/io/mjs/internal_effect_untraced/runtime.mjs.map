{"version":3,"file":"runtime.mjs","names":["Context","Debug","Option","Exit","Fiber","FiberId","FiberRefs","CausePretty","core","FiberRuntime","fiberScope","OpCodes","runtimeFlags","_supervisor","_scheduler","unsafeFork","runtime","methodWithTrace","trace","self","options","fiberId","unsafeMake","effect","traced","fiberRefs","updatedAs","currentContext","context","scheduler","currentScheduler","updateRefs","fiberRuntime","forkAs","supervisor","getSupervisor","none","onStart","unsafeAddObserver","exit","onEnd","globalScope","add","start","unsafeRunCallback","onExit","id","onExitInterrupt","interruptAs","flatten","unsafeRunSync","SyncScheduler","flush","result","unsafePoll","_tag","fiberFailure","i0","AsyncFiber","constructor","fiber","toString","Symbol","for","FiberFailureId","FiberFailureCauseId","NodePrint","cause","limit","Error","stackTraceLimit","error","pretty","prettyErrors","length","name","message","split","substring","stack","isFiberFailure","u","unsafeRunSyncExit","unsafeRunSyncEither","untraced","either","unsafeRunPromise","Promise","resolve","reject","OP_SUCCESS","OP_FAILURE","unsafeRunPromiseExit","unsafeRunPromiseEither","RuntimeImpl","make","withFiberRuntime","state","status","succeed","getFiberRef","unsafeGetFiberRefs","defaultRuntimeFlags","Interruption","CooperativeYielding","defaultRuntime","empty","Map","unsafeRunEffect","unsafeForkEffect","unsafeRunPromiseEffect","unsafeRunPromiseEitherEffect","unsafeRunPromiseExitEffect","unsafeRunSyncEffect","unsafeRunSyncExitEffect","unsafeRunSyncEitherEffect","asyncEffect","restoreTrace","register","flatMap","deferredMake","deferred","uninterruptibleMask","restore","zipRight","fork","catchAllCause","cb","intoDeferred","deferredFailCause","deferredAwait"],"sources":["../../../src/internal_effect_untraced/runtime.ts"],"sourcesContent":[null],"mappings":"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"}