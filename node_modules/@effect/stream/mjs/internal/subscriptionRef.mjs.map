{"version":3,"file":"subscriptionRef.mjs","names":["bodyWithTrace","dualWithTrace","methodWithTrace","Effect","Hub","_circular","_ref","Ref","Synchronized","stream","SubscriptionRefSymbolKey","SubscriptionRefTypeId","Symbol","for","subscriptionRefVariance","_A","_","SubscriptionRefImpl","constructor","ref","hub","semaphore","_a","refVariance","_b","synchronizedVariance","_c","changes","unwrapScoped","withPermits","flatMap","a","map","s","concat","make","fromHubScoped","get","modify","f","trace","modifyEffect","succeed","traced","b","zipLeft","publish","as","set","RefTypeId","SynchronizedTypeId","self","value","all","unbounded","makeSemaphore"],"sources":["../../../src/internal/subscriptionRef.ts"],"sourcesContent":[null],"mappings":"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"}