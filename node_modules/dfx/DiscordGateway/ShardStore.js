import * as tsplus_module_1 from "dfx/_common";
import * as tsplus_module_2 from "@effect/data/Option";
import * as tsplus_module_3 from "@effect/io/Effect";
import * as tsplus_module_4 from "@effect/io/Layer";
export const ShardStore = tsplus_module_1.Tag();
// Very basic shard id store, that does no health checks
const memoryStore = () => {
    let currentId = 0;
    return {
        claimId: ({ totalCount }) => tsplus_module_3.sync(() => {
            if (currentId >= totalCount) {
                return tsplus_module_2.none();
            }
            const id = currentId;
            currentId++;
            return tsplus_module_2.some(id);
        }),
        allClaimed: totalCount => tsplus_module_3.sync(() => currentId >= totalCount),
    };
};
export const LiveMemoryShardStore = tsplus_module_4.sync(ShardStore, memoryStore);
//# sourceMappingURL=ShardStore.js.map